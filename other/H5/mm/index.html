<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="width=device-width, initial-scale=1" name="viewport" />
<title>A love letter to MM</title>

<style type="text/css">
@font-face {
	font-family: digit;
	src: url('digital-7_mono.ttf') format("truetype");
}
</style>
<!-- <link href="css/bubble.css" type="text/css" rel="stylesheet"> -->
<link href="css/default.css" type="text/css" rel="stylesheet">
<link rel="icon" href="res/img/favor_ico.ico" type="img/x-ico"/>


<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/garden.js"></script>
<script type="text/javascript" src="js/functions.js"></script>
</head>

<body text-align="center">
<audio autoplay="autoplay" id="bgm">
<source src="res/bgm.mp3" type="audio/mpeg"/>
音频无法播放，可以使用chrome浏览器播放
</audio>
<div id="tips" margin="0">
	<span class="tips">/* 点击频幕可以控制音乐哦 ^_^ */</span>
</div>
<div id="mainDiv" onclick="playOrStop()">
	<div id="content">
		<div id="code">
			<span class="comments">/**</span><br />
			<span class="space"/><span class="comments">*@author haoxuhao</span><br />
			<span class="space"/><span class="comments">*@time 2017-12-30</span><br />
			<span class="space"/><span class="comments">*/</span><br />
			Boy boy = new Person(<span class="keyword">"小傻子"</span>);<br />
			Girl girl = new Person(<span class="keyword">"可爱敏"</span>);<br />
			<span class="comments">/*fall in love river.*/</span><br />
			The boy love the girl;<br />
			<span class="comments">/*they love each other.*/</span><br />
			The girl loved the boy;<br />
			<span class="comments">/*as time goes on.*/</span><br />
			The boy can not be separated the girl;<br />
			<span class="comments">/*at the same time.*/</span><br />
			The girl can not be separated the boy;<br />
			<span class="comments">/*they cannot be saparated from each other*/</span><br />
			The boy want to share every miniute with the girl;<br />
			<span class="keyword">boy</span> is very <span class="keyword">happy</span>;<br />
			<span class="keyword">girl</span> is also very <span class="keyword">happy</span>;<br />
			The boy has one <span class="keyword">dream</span>;<br />
			<span class="comments">/*the boy wants to try his best to bring happiness to the girl all the time*/</span><br />
			<br>
			<br>
			我想说的是:<br />
			敏敏,我爱你;<br />
		</div>
		<div id="loveHeart">
			<canvas id="garden"></canvas>
			<div id="words">
				<div id="messages">
					亲爱的，我们已经相遇这么久了
					<div id="elapseClock"></div>
				</div>
				<div id="loveu">
					我想这样直到永永远远。<br/>
					<div class="signature">- 小傻子</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">

//缩放视图
    $(document).ready(function(){
        resizeDiv();
    });

    var resizeDiv = function(){
        var width = $(window).width();
        var height = $(window).height();
        var scaleX = width/670; //设备默认宽度为810px
        var scaleY = height/625; //设备默认高度为340px

        //按设备比例缩放div的比例
        var scaleFunc = "scale("+scaleX+","+scaleY+")";

        $('loveHeart').css({
            "transform":scaleFunc, //缩放比例
            "transform-origin":"left top", //缩放基点

            "-ms-transform":scaleFunc,     /* IE 9 */
            "-ms-transform-origin":"left top",

            "-moz-transform":scaleFunc,     /* Firefox */
            "-moz-transform-origin":"left top",

            "-webkit-transform":scaleFunc, /* Safari 和 Chrome */
            "-webkit-transform-origin":"left top",

            "-o-transform":scaleFunc,     /* Opera */
            "-o-transform-origin":"left top",
        });

        $('loveHeart').show();
    };
	
var audio = document.getElementById('bgm'); 
function playOrStop()
{
	if(audio!=null){
		if(audio.paused){                 
		   audio.play();//audio.play();// 这个就是
		}else{
		   audio.pause();// 这个就是暂停
		}
	}
}
var offsetX = $("#loveHeart").width() / 2;
var offsetY = $("#loveHeart").height() / 2 - 55;
var together = new Date();
together.setFullYear(2015, 9, 10);
together.setHours(20);
together.setMinutes(0);
together.setSeconds(0);
together.setMilliseconds(0);
$("#code").hide();

if (!document.createElement('canvas').getContext) {
	var msg = document.createElement("div");
	msg.id = "errorMsg";
	msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
	document.body.appendChild(msg);
	$("#code").css("display", "none")
	$("#copyright").css("position", "absolute");
	$("#copyright").css("bottom", "10px");
	document.execCommand("stop");
} else {
	/*setTimeout(function () {
		startHeartAnimation();
	}, 12500);
	*/
	audio.pause();
	setTimeout(function(){
		$("#tips").fadeOut(1000);
		audio.play();
	},2000);
	
	timeElapse(together);
	setInterval(function () {
		timeElapse(together);
	}, 500);
	setTimeout(function(){
		audio.pause();
		document.getElementById("mainDiv").onclick=function(){};//设置屏幕点击事件无效
	},115000);
	adjustCodePosition();
	//code = document.getElementById("code").style.display = "none";
	
	setTimeout(function(){
		$("#code").show();
		$("#code").typewriter();
	},15000);
	//$("#code").typewriter();
}
</script>
</body>
</html>